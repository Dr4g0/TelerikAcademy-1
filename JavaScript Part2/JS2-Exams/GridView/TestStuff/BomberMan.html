<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script>
        function startGame() {
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            var pixelSize = 25;


            function getRndPosition() {
                var w = (Math.random() * canvas.width);
                w -= w % pixelSize;
                while (w < pixelSize * 6) {
                    w = (Math.random() * canvas.width);
                    w -= w % pixelSize;
                }

                var h = (Math.random() * canvas.height);
                h -= h % pixelSize;
                while (h < pixelSize * 6) {
                    h = (Math.random() * canvas.width);
                    h -= h % pixelSize;
                }
                var wallIsThere = true;
                while (wallIsThere) {

                }
                wallIsThere = false;
                for (var i = 0; i < stops.length; i++) {
                    
                    if (stops[i].W == w && stops[i].H == h) {
                        wallIsThere = true;
                        break;
                    }
                }

                return { W: w, H: h }
            }

            var stops = [];
            (function drawWalls() {
                ctx.fillStyle = '#333';
                for (var i = 0; i < canvas.width; i+= pixelSize) {
                    ctx.fillRect(i, 0, pixelSize, pixelSize);
                    ctx.fillRect(i, canvas.height - pixelSize, pixelSize, pixelSize);
                    stops.push({ W: i, H: 0 });
                    stops.push({ W: i, H: canvas.height - pixelSize});
                }
                for (var i = 0; i < canvas.height; i += pixelSize) {
                    ctx.fillRect(0, i, pixelSize, pixelSize);
                    ctx.fillRect(canvas.width - pixelSize, i, pixelSize, pixelSize);
                    stops.push({ W: 0, H: i });
                    stops.push({ W: canvas.width - pixelSize, H: i });
                }
                for (var i = 2 * pixelSize; i < canvas.height; i += 2 * pixelSize) {
                    for (var j = 2 * pixelSize; j < canvas.width - pixelSize*2; j += 2 * pixelSize) {
                        ctx.fillRect(j, i, pixelSize, pixelSize);
                        stops.push({ W: j, H: i });
                    }
                }
            }());

            var walls = [];
            (function generateWalls() {
                var number = 40;
                for (var i = 0; i < number; i++) {
                    var position = getRndPosition();
                    ctx.fillStyle = 'EEE';
                    ctx.fillRect(position.W, position.H, pixelSize, pixelSize);
                    walls.push({ W: position.W, H: position.H, alive: true });
                }
            }());

            function gameOver() {

            }

            var enemies = [];

            var dW = [0, 1, 0, -1];
            var dH = [1, 0, -1, 0];

            function Enemy() {
                var position = getRndPosition();
                this.W = position.W;
                this.H = position.H;
                this.alive = true;
                this.direction = Math.floor(Math.random() * 4);

            }

            Enemy.prototype.move = function () {
                newW = this.W + (pixelSize) * dW[this.direction];
                newH = this.H + (pixelSize) * dH[this.direction];

                for (var i = 0; i < walls.length; i++) {

                }
            }
        }
    </script>
</head>
<body>
    <canvas id="canvas" width="975" height="575"></canvas>
    <script>
        startGame();
    </script>
</body>
</html>
